<!DOCTYPE html>
<html lang="en">
<head>
<title>Generate BASH Command</title>

<link crossorigin="anonymous" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.4.4/umd/popper.min.js"></script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6710021794174728" crossorigin="anonymous"></script>
<script type="text/javascript">
function temp_alert(msg,duration) {
    var el = document.createElement("div");
    document.getElementById("cmd_text").appendChild(el);
    el.setAttribute("style","position:absolute;top:40%;left:20%;background-color:green;");
    el.innerHTML = msg;
    setTimeout(function() {
        el.parentNode.removeChild(el);
    },duration);
    document.body.appendChild(el);
}
    
function copy_to_clip() {
    var copy_text = document.getElementById("cmd_text");

    copy_text.select();
    copy_text.setSelectionRange(0, 99999); /* For mobile devices */
    navigator.clipboard
        .writeText(copy_text.value)
        .then(() => {
            temp_alert("successfully copied",1000);
        })
        .catch(() => {
            temp_alert("something went wrong",1000);
        });
}
</script>

<script type="text/javascript">
function show_cmd() {
    var country = document.getElementsByName("country")[0].value;
    var province = document.getElementsByName("province")[0].value;
    var locality = document.getElementsByName("locality")[0].value;
    var organization = document.getElementsByName("organization")[0].value;
    var orgunit = document.getElementsByName("orgunit")[0].value;
    var cname = document.getElementsByName("cname")[0].value;
    var email = document.getElementsByName("email")[0].value;
    var key_name = cname + '.key';
    var csr_name = cname + '.csr';
    cmd_str = 'openssl req -new -nodes -sha256 -newkey rsa:2048 -keyout ' + key_name + ' -out ' + csr_name + ' -subj "/emailAddress=' + email + '/CN=' + cname + '/O=' + organization + '/OU=' + orgunit + '/C=' + country + '/ST=' + province + '/L=' + locality + '"';
    document.getElementsByName("cmd_text")[0].value = cmd_str ;
}
</script>
</head>
<body>

</br>
<div class="container-fluid">
<div class="row">
  <div class="col-sm"><h2>Generate SSL CSR and Key Noninteractively</h2></div>
</div></br>

<div class="input-group input-group-lg">    
  <div class="input-group-prepend">
    <span class="input-group-text" id="inputGroup-sizing-lg">Country Name (2 letter code) [AU]:</span>
  </div>
  <input type="text" maxlength=2 name="country" class="form-control" aria-label="country" aria-describedby="inputGroup-sizing-sm">    
</div></br>

<div class="input-group input-group-lg">
  <div class="input-group-prepend">
    <span class="input-group-text" id="inputGroup-sizing-lg">State or Province Name (full name) [Some-State]:</span>
  </div>
  <input type="text" maxlength=40 name="province" class="form-control" aria-label="province" aria-describedby="inputGroup-sizing-sm">
</div></br>

<div class="input-group input-group-lg">
  <div class="input-group-prepend">
    <span class="input-group-text" id="inputGroup-sizing-lg">Locality Name (eg, city) []:</span>
  </div>
  <input type="text" maxlength=40 name="locality" class="form-control" aria-label="locality" aria-describedby="inputGroup-sizing-sm">
</div></br>

<div class="input-group input-group-lg">
  <div class="input-group-prepend">
    <span class="input-group-text" id="inputGroup-sizing-lg">Organization Name (eg, company) [Internet Widgits Pty Ltd]:</span>
  </div>
  <input type="text" maxlength=60 name="organization" class="form-control" aria-label="organization" aria-describedby="inputGroup-sizing-sm">
</div></br>

<div class="input-group input-group-lg">
  <div class="input-group-prepend">
    <span class="input-group-text" id="inputGroup-sizing-lg">Organizational Unit Name (eg, section) []:</span>
  </div>
  <input type="text" maxlength=60 name="orgunit" class="form-control" aria-label="orgunit" aria-describedby="inputGroup-sizing-sm">
</div></br>

<div class="input-group input-group-lg">
  <div class="input-group-prepend">
    <span class="input-group-text" id="inputGroup-sizing-lg">Common Name (e.g. server FQDN or YOUR name) []:</span>
  </div>
  <input type="text" maxlength=60 name="cname" class="form-control" aria-label="cname" aria-describedby="inputGroup-sizing-sm">
</div></br>

<div class="input-group input-group-lg">
  <div class="input-group-prepend">
    <span class="input-group-text" id="inputGroup-sizing-lg">Email Address []:</span>
  </div>
  <input type="text" maxlength=60 name="email" class="form-control" aria-label="email" aria-describedby="inputGroup-sizing-sm">
</div></br>

<div class="input-group input-group-lg" style="background-color: #b4deb1;">
  <div class="input-group-prepend" style="background-color: #b4deb1;">
    <span class="input-group-text" style="background-color: #b4deb1;" id="inputGroup-sizing-lg">BASH Command:</span>
  </div>
  <input class="form-control" style="background-color: #b4deb1;" type="text" name="cmd_text" id="cmd_text" readonly aria-label="Command" aria-describedby="inputGroup-sizing-sm">
</div></br>

<div class="row">
  <div class="col-sm">
    <input type="button" class="btn btn-info btn-lg" data-toggle="tooltip" data-placement="bottom" title="Show Command" value="Show" onclick="javascript:show_cmd();">
    <input type="button" class="btn btn-info btn-lg" data-toggle="tooltip" data-placement="bottom" title="Copy Command to Clipboard" value="Copy" onclick="javascript:copy_to_clip();">
  </div>
</div></br></br>
<a href="/bash/Security" class="btn btn-default btn-sm"><span class="glyphicon glyphicon-home"></span> <h5>Back</h5></a>
</div>

</body>
</html>
